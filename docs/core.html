---

title: fastgpu
keywords: fastai
sidebar: home_sidebar

summary: "A queue service for quickly developing scripts that use all your GPUs efficiently"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Overview">Overview<a class="anchor-link" href="#Overview">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here's what fastgpu does:</p>
<ol>
<li>poll <code>to_run</code></li>
<li>find first file</li>
<li>check there's an available worker id</li>
<li>move it to <code>running</code></li>
<li>handle the script<ol>
<li>create lock file</li>
<li>redirect stdout/err to <code>out</code></li>
<li>run it</li>
<li>when done, move it to <code>complete</code> or <code>failed</code></li>
<li>unlock</li>
</ol>
</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For demonstrating how to use <code>fastgpu</code>, we first create a directory to store our scripts and outputs:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="setup_dirs" class="doc_header"><code>setup_dirs</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L10" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>setup_dirs</code>(<strong><code>path</code></strong>)</p>
</blockquote>
<p>Create and return the following subdirs of <code>p</code>: to_run running complete fail out</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These are all the subdirectories that are created for us. Your scripts go in <code>to_run</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">path_run</span><span class="p">,</span><span class="n">path_running</span><span class="p">,</span><span class="n">path_complete</span><span class="p">,</span><span class="n">path_fail</span><span class="p">,</span><span class="n">path_out</span> <span class="o">=</span> <span class="n">setup_dirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's create a scripts directory with a couple of "scripts" (actually symlinks for this demo) in it.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">_setup_test_env</span><span class="p">():</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
    <span class="n">path</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">setup_dirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="s1">&#39;/bin/ls&#39;</span><span class="p">,</span> <span class="n">path_run</span><span class="o">/</span><span class="s1">&#39;ls&#39;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="s1">&#39;/bin/false&#39;</span><span class="p">,</span> <span class="n">path_run</span><span class="o">/</span><span class="s1">&#39;false&#39;</span><span class="p">)</span>
    <span class="p">(</span><span class="n">path_run</span><span class="o">/</span><span class="s1">&#39;test_dir&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_setup_test_env</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Helper-functions-for-scripts">Helper functions for scripts<a class="anchor-link" href="#Helper-functions-for-scripts">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>These functions are used to find and run scripts, and move scripts to the appropriate subdirectory at the appropriate time.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_next_script" class="doc_header"><code>find_next_script</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L17" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_next_script</code>(<strong><code>p</code></strong>)</p>
</blockquote>
<p>Get the first script from <code>p</code> (in sorted order)</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">find_next_script</span><span class="p">(</span><span class="n">path_run</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">find_next_script</span><span class="p">(</span><span class="n">path_complete</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="safe_rename" class="doc_header"><code>safe_rename</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>safe_rename</code>(<strong><code>file</code></strong>, <strong><code>dest</code></strong>)</p>
</blockquote>
<p>Move <code>file</code> to <code>dest</code>, prefixing a random uuid if there's a name conflict</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ResourcePoolBase" class="doc_header"><code>class</code> <code>ResourcePoolBase</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L34" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ResourcePoolBase</code>(<strong><code>path</code></strong>)</p>
</blockquote>
<p>Base class for locked access to list of idents</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This abstract class locks and unlocks resources using lockfiles. Override <code>all_ids</code> to make the list of resources available. See <a href="/core.html#FixedWorkerPool"><code>FixedWorkerPool</code></a> for a simple example and details on each method.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="FixedWorkerPool" class="doc_header"><code>class</code> <code>FixedWorkerPool</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L90" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>FixedWorkerPool</code>(<strong><code>worker_ids</code></strong>, <strong><code>path</code></strong>) :: <a href="/core.html#ResourcePoolBase"><code>ResourcePoolBase</code></a></p>
</blockquote>
<p>Vends locked access to fixed list of idents</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The simplest possible <a href="/core.html#ResourcePoolBase"><code>ResourcePoolBase</code></a> subclass - the resources are just a list of ids. For instance:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_setup_test_env</span><span class="p">()</span>
<span class="n">wp</span> <span class="o">=</span> <span class="n">FixedWorkerPool</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">path</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ResourcePoolBase.unlock" class="doc_header"><code>ResourcePoolBase.unlock</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L42" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ResourcePoolBase.unlock</code>(<strong><code>ident</code></strong>)</p>
</blockquote>
<p>Remove lockfile for <code>ident</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If there are no locks, this does nothing:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">wp</span><span class="o">.</span><span class="n">unlock</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ResourcePoolBase.find_next" class="doc_header"><code>ResourcePoolBase.find_next</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L45" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ResourcePoolBase.find_next</code>()</p>
</blockquote>
<p>Finds next available resource, or None</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Initially all resources are available (unlocked), so the first from the provided list will be returned:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">find_next</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ResourcePoolBase.lock" class="doc_header"><code>ResourcePoolBase.lock</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ResourcePoolBase.lock</code>(<strong><code>ident</code></strong>)</p>
</blockquote>
<p>Create lockfile for <code>ident</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After locking the first resource, it is no longer returned next:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">wp</span><span class="o">.</span><span class="n">lock</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">find_next</span><span class="p">(),</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ResourcePoolBase.lock_next" class="doc_header"><code>ResourcePoolBase.lock_next</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L46" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ResourcePoolBase.lock_next</code>()</p>
</blockquote>
<p>Locks an available resource and returns its ident, or None</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is the normal way to access a resource - it simply combines <code>find_next</code> and <code>lock</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">wp</span><span class="o">.</span><span class="n">lock_next</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">wp</span><span class="o">.</span><span class="n">find_next</span><span class="p">(),</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ResourcePoolBase.run" class="doc_header"><code>ResourcePoolBase.run</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L63" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ResourcePoolBase.run</code>(<strong><code>script</code></strong>, <strong><code>ident</code></strong>)</p>
</blockquote>
<p>Run <code>script</code> using resource <code>ident</code></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_setup_test_env</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">find_next_script</span><span class="p">(</span><span class="n">path_run</span><span class="p">)</span>
<span class="n">wp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">test_eq</span><span class="p">(</span><span class="n">find_next_script</span><span class="p">(</span><span class="n">path_run</span><span class="p">),</span> <span class="n">path_run</span><span class="o">/</span><span class="s1">&#39;ls&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">((</span><span class="n">path_out</span><span class="o">/</span><span class="s1">&#39;false.exitcode&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(),</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">path_fail</span><span class="o">/</span><span class="s1">&#39;false&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ResourcePoolBase.poll_scripts" class="doc_header"><code>ResourcePoolBase.poll_scripts</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L68" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ResourcePoolBase.poll_scripts</code>(<strong><code>poll_interval</code></strong>=<em><code>0.1</code></em>)</p>
</blockquote>
<p>Poll <code>to_run</code> for scripts and run in parallel on available resources</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_setup_test_env</span><span class="p">()</span>
<span class="n">wp</span><span class="o">.</span><span class="n">poll_scripts</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="ow">not</span> <span class="n">find_next_script</span><span class="p">(</span><span class="n">path_run</span><span class="p">),</span> <span class="n">find_next_script</span><span class="p">(</span><span class="n">path_run</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">((</span><span class="n">path_out</span><span class="o">/</span><span class="s1">&#39;false.exitcode&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(),</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">((</span><span class="n">path_out</span><span class="o">/</span><span class="s1">&#39;ls.exitcode&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">(),</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">path_run</span><span class="o">/</span><span class="s1">&#39;false&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">path_fail</span><span class="o">/</span><span class="s1">&#39;false&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">path_complete</span><span class="o">/</span><span class="s1">&#39;ls&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
<span class="k">assert</span> <span class="s1">&#39;README.md&#39;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">path_out</span><span class="o">/</span><span class="s1">&#39;ls.stdout&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="GPU">GPU<a class="anchor-link" href="#GPU">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NVIDIAGPUs" class="doc_header"><code>class</code> <code>NVIDIAGPUs</code><a href="https://github.com/fastai/fastgpu/tree/master/fastgpu/core.py#L101" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NVIDIAGPUs</code>(<strong><code>path</code></strong>) :: <a href="/core.html#ResourcePoolBase"><code>ResourcePoolBase</code></a></p>
</blockquote>
<p>Vends locked access to NVIDIA GPUs</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_setup_test_env</span><span class="p">()</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">NVIDIAGPUs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">is_available</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lockedID</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">lock_next</span><span class="p">()</span>
<span class="n">lockedID</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nextLockedID</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">lock_next</span><span class="p">()</span>
<span class="n">nextLockedID</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">unlock</span><span class="p">(</span><span class="n">lockedID</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">is_available</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>
 

